var k=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var x=(d,m)=>{var a={};for(var s in d)F.call(d,s)&&m.indexOf(s)<0&&(a[s]=d[s]);if(d!=null&&k)for(var s of k(d))m.indexOf(s)<0&&S.call(d,s)&&(a[s]=d[s]);return a};import{_ as A}from"./WithGithub.ce8f6c86.js";import{v as D,J as G,w as M,Q as _,T,S as $,x as i,q as j,r as z,s as v,y as r,C as n,A as e,z as V,D as E,G as I}from"./vendor.a61334ed.js";import{u as J,v as L}from"./validate.a60ae09d.js";import{$ as Q,r as W}from"./app.3dee77a8.js";import{u as H}from"./app.90aab714.js";import"./plugin-vue_export-helper.21dcd24c.js";const K={class:"max-w-300px m-auto"},O={class:"register-container"},X={class:"title-container"},Y={text:"2xl",p:"10"},Z={class:"flex justify-between"},ne=D({setup(d){const m=G(),{t:a}=M(),s=H(),g=_(!1),l=T({serverUrl:s.serverUrl,display_name:"",email:"",password:"",checkPass:"",url:""}),w=_(),U=_(),y=_(),b=(h,o,u)=>{L()?u():u(new Error(a("error.username")))},{validatePass:C,validatePass2:P}=J(w,l),q={email:[{required:!0,trigger:"blur",validator:b}],password:[{required:!0,trigger:"blur",validator:C}],checkPass:[{required:!0,trigger:"blur",validator:P}],url:[{required:!0,trigger:"blur"}]};$(()=>{l.email===""?U.value.focus():l.password===""&&y.value.focus()});function N(){w.value.validate(async h=>{if(h){Q.defaults.baseURL=l.serverUrl,g.value=!0;try{const o=l,{serverUrl:u,checkPass:p}=o,c=x(o,["serverUrl","checkPass"]),f=await W(c);f&&f.errno!==1e3&&(I.success({message:a("message.register_success"),showClose:!0}),m.push("/login"))}catch{}g.value=!1}})}return(h,o)=>{const u=i("el-input"),p=i("el-form-item"),c=i("el-button"),f=i("el-form"),R=i("router-link"),B=A;return j(),z("main",K,[v("div",O,[r(f,{ref_key:"registerFormEl",ref:w,model:e(l),rules:q,"status-icon":"",autocomplete:"on","label-position":"left"},{default:n(()=>[v("div",X,[v("h2",Y,V(e(a)("register.title")),1)]),r(p,{prop:"serverUrl",required:""},{default:n(()=>[r(u,{ref:"serverUrlEl",modelValue:e(l).serverUrl,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).serverUrl=t),placeholder:e(a)("placeholder.server_url"),name:"serverUrl",type:"text",autocomplete:"on"},null,8,["modelValue","placeholder"])]),_:1}),r(p,{prop:"display_name"},{default:n(()=>[r(u,{ref:"displayNameEl",modelValue:e(l).display_name,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).display_name=t),placeholder:e(a)("placeholder.nickname"),name:"display_name",type:"text",autocomplete:"on"},null,8,["modelValue","placeholder"])]),_:1}),r(p,{prop:"email"},{default:n(()=>[r(u,{ref_key:"emailEl",ref:U,modelValue:e(l).email,"onUpdate:modelValue":o[2]||(o[2]=t=>e(l).email=t),placeholder:e(a)("placeholder.email"),name:"email",type:"text",autocomplete:"on"},null,8,["modelValue","placeholder"])]),_:1}),r(p,{prop:"url"},{default:n(()=>[r(u,{ref:"urlEl",modelValue:e(l).url,"onUpdate:modelValue":o[3]||(o[3]=t=>e(l).url=t),placeholder:e(a)("user.url"),name:"url",type:"text",autocomplete:"on"},null,8,["modelValue","placeholder"])]),_:1}),r(p,{prop:"password"},{default:n(()=>[r(u,{ref_key:"passwordEl",ref:y,modelValue:e(l).password,"onUpdate:modelValue":o[4]||(o[4]=t=>e(l).password=t),placeholder:e(a)("placeholder.password"),name:"password",type:"password",autocomplete:"on"},null,8,["modelValue","placeholder"])]),_:1}),r(p,{prop:"checkPassword"},{default:n(()=>[r(u,{ref_key:"passwordEl",ref:y,modelValue:e(l).password,"onUpdate:modelValue":o[5]||(o[5]=t=>e(l).password=t),placeholder:e(a)("message.input_password_again"),name:"password",type:"password"},null,8,["modelValue","placeholder"])]),_:1}),r(p,null,{default:n(()=>[r(c,{type:"primary",class:"block w-full",loading:g.value,onClick:N},{default:n(()=>[E(V(e(a)("button.register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),v("div",Z,[r(R,{to:"/login"},{default:n(()=>[r(c,null,{default:n(()=>[E(V(e(a)("button.login")),1)]),_:1})]),_:1}),r(B)])])])}}});export{ne as default};
